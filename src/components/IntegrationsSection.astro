---
/**
 * Integrations â€” Apps/tools that work with product.
 * Similar to logo-cloud but with integration messaging.
 */
interface Props {
  headline: string;
  description?: string;
  integrations: Array<{
    name: string;
    logoUrl: string;
    link?: string;
    description?: string;
  }>;
  columns?: 2 | 3 | 4;
  instanceId?: string | number;
}

const {
  headline,
  description,
  integrations = [],
  columns = 4,
  instanceId = 'default',
} = Astro.props;

const colClass =
  columns === 2
    ? 'md:grid-cols-2'
    : columns === 3
      ? 'md:grid-cols-2 lg:grid-cols-3'
      : 'md:grid-cols-2 lg:grid-cols-4';
const headingId = `integrations-heading-${instanceId}`;
---

<section
  class="py-[var(--section-padding-y)] px-[var(--container-padding-x)]"
  aria-labelledby={headingId}
>
  <div class="mx-auto max-w-[var(--container-max-width)]">
    <h2
      id={headingId}
      class="text-[var(--font-size-2xl)] font-bold text-[var(--color-text-primary)] md:text-[var(--font-size-3xl)]"
      style="font-family: var(--font-heading)"
    >
      {headline}
    </h2>
    {description && (
      <p
        class="mt-2 max-w-2xl text-[var(--font-size-base)] text-[var(--color-text-secondary)]"
        style="font-family: var(--font-body)"
      >
        {description}
      </p>
    )}
    {integrations.length > 0 && (
      <div class={`mt-10 grid grid-cols-1 gap-6 ${colClass}`}>
        {integrations.map((item) => {
          const cardContent = (
            <>
              <img
                src={item.logoUrl}
                alt={`${item.name} logo`}
                class="h-12 w-auto object-contain"
                loading="lazy"
              />
              <span
                class="mt-3 text-[var(--font-size-base)] font-medium text-[var(--color-text-primary)]"
                style="font-family: var(--font-heading)"
              >
                {item.name}
              </span>
              {item.description && (
                <p
                  class="mt-1 text-center text-[var(--font-size-sm)] text-[var(--color-text-secondary)]"
                  style="font-family: var(--font-body)"
                >
                  {item.description}
                </p>
              )}
            </>
          );
          return (
            <div
              class="flex flex-col items-center rounded-[var(--radius-card)] border border-[var(--color-border)] bg-[var(--color-bg-page)] p-6 shadow-[var(--shadow-sm)] transition-shadow hover:shadow-[var(--shadow-md)]"
            >
              {item.link ? (
                <a
                  href={item.link}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="flex flex-col items-center transition-opacity hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 rounded-[var(--radius-md)] -m-2 p-2"
                  aria-label={`${item.name} integration`}
                >
                  {cardContent}
                </a>
              ) : (
                cardContent
              )}
            </div>
          );
        })}
      </div>
    )}
  </div>
</section>
