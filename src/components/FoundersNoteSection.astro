---
/**
 * Founder's note — Personal message from founder.
 * Quote + optional photo + optional CTA.
 */
import { buildSrcset } from '../utils/image';

interface Props {
  quote: string;
  author: string;
  role?: string;
  photo?: string;
  cta?: { text: string; href: string };
  instanceId?: string | number;
}

const {
  quote,
  author,
  role,
  photo,
  cta,
  instanceId = 'default',
} = Astro.props;
---

<section
  class="py-[var(--section-padding-y)] px-[var(--container-padding-x)]"
  aria-label="Bemærkning fra grundlægger"
>
  <div class="mx-auto max-w-[var(--container-max-width)]">
    <blockquote class="flex flex-col items-center text-center md:flex-row md:items-start md:text-left md:gap-10">
      {photo && (
        <div class="shrink-0">
          <img
            src={photo}
            srcset={buildSrcset(photo, [160, 256, 320])}
            sizes="160px"
            alt={`Portræt af ${author}`}
            class="mx-auto h-32 w-32 rounded-[var(--radius-full)] object-cover shadow-[var(--shadow-md)] md:mx-0"
            loading="lazy"
          />
        </div>
      )}
      <div class="flex-1">
        <p
          class="text-[var(--font-size-xl)] font-medium leading-[var(--line-height-relaxed)] text-[var(--color-text-primary)] md:text-[var(--font-size-2xl)]"
          style="font-family: var(--font-body)"
        >
          &ldquo;{quote}&rdquo;
        </p>
        <footer class="mt-6">
          <cite
            class="text-[var(--font-size-base)] font-semibold text-[var(--color-text-primary)] not-italic"
            style="font-family: var(--font-heading)"
          >
            {author}
          </cite>
          {role && (
            <p
              class="mt-1 text-[var(--font-size-sm)] text-[var(--color-text-secondary)]"
              style="font-family: var(--font-body)"
            >
              {role}
            </p>
          )}
        </footer>
        {cta && (
          <div class="mt-6">
            <a
              href={cta.href}
              class="inline-flex min-h-[44px] min-w-[44px] items-center justify-center rounded-[var(--radius-button)] bg-[var(--color-primary)] px-6 py-3 text-[var(--font-size-base)] font-medium text-[var(--color-text-on-primary)] shadow-[var(--shadow-sm)] transition-colors hover:bg-[var(--color-primary-hover)] focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2"
              style="font-family: var(--font-body)"
            >
              {cta.text}
            </a>
          </div>
        )}
      </div>
    </blockquote>
  </div>
</section>
